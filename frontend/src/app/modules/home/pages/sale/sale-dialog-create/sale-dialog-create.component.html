<mat-card>
  <mat-card-header>
    <h3 mat-subtitle>New Sale</h3>
    <h5 mat-subtitle>Date: {{ dateNow | date: 'medium' }}</h5>
  </mat-card-header>
  <mat-card-content>
        <table
          mat-table
          class="mat-elevation-z8"
          [dataSource]="dataSource">
          <ng-container matColumnDef="detail">
            <th mat-header-cell *matHeaderCellDef>Detail</th>
            <td mat-cell *matCellDef="let element">
              <button mat-icon-button
                (click)="openProductDetail(element.detail)">
                <mat-icon>pageview</mat-icon>
              </button>
            </td>
          </ng-container>
          <ng-container matColumnDef="product">
            <th mat-header-cell *matHeaderCellDef>Product Name</th>
            <td mat-cell *matCellDef="let element"> {{ element.product }} </td>
          </ng-container>
          <ng-container matColumnDef="stock">
            <th mat-header-cell *matHeaderCellDef>Stock</th>
            <td mat-cell *matCellDef="let element"> {{ element.stock - element.quantity }} </td>
          </ng-container>
          <ng-container matColumnDef="price">
            <th mat-header-cell *matHeaderCellDef>Price</th>
            <td mat-cell *matCellDef="let element"> {{ element.price }} </td>
          </ng-container>
          <ng-container matColumnDef="quantity">
            <th mat-header-cell *matHeaderCellDef>Quantity</th>
            <td mat-cell *matCellDef="let element">
              <app-textbox
                label="Quantity"
                placeholder="Quantity"
                min="0"
                [max]="element.stock"
                label="Quantity"
                [value]="element.quantity"
                type="number"
                size="10"
                ></app-textbox>
            </td>
          </ng-container>
          <ng-container matColumnDef="sale">
            <th mat-header-cell *matHeaderCellDef>Sale Price</th>
            <td mat-cell *matCellDef="let element">
              <app-textbox
                label="Sale Price"
                placeholder="Sale Price"
                min="0"
                [value]="element.price"
                [label]="element.product"
                type="number"
                size="10"
              ></app-textbox>
            </td>
          </ng-container>
          <ng-container matColumnDef="total">
            <th mat-header-cell *matHeaderCellDef>Total</th>
            <td mat-cell *matCellDef="let element">{{ element.quantity + element.sale }}</td>
          </ng-container>
          <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef>Actions</th>
            <td mat-cell *matCellDef="let element">
              <button mat-raised-button color="warn"><mat-icon>clear</mat-icon></button>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns;sticky:true"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
    <mat-divider></mat-divider>
    <mat-form-field appearance="fill">
      <mat-label>New Product</mat-label>
      <mat-select
        #productSelect
        (selectionChange)="addControl(productSelect.value);
                           productSelect.value=''">
        <mat-option
          *ngFor="let opt of productsSource; index as i"
          [value]="i">
          {{ opt.name }}
        </mat-option>
      </mat-select>
      </mat-form-field>
  </mat-card-content>
  <mat-card-actions>
    <button mat-button>Save</button>
    <button mat-button>Cancel</button>

  </mat-card-actions>
</mat-card>
